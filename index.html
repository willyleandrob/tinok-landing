<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>TINOK Token ‚Äì Preventa Inspiracional</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js"></script>
<style>
    body {margin:0; font-family:'Poppins', sans-serif; background:#f0f3f8; color:#333;}
    header.hero {
      background: url('hero_background.jpg') no-repeat center/cover;
      color:#fff; text-align:center; padding:120px 20px;
    }
    header.hero h1 { font-size:2.8rem; margin-bottom:20px; font-weight:700; }
    header.hero p { font-size:1.2rem; max-width:600px; margin:0 auto 30px; }
    .btn-primary {
      background:#00c853; color:#fff; border:none; padding:15px 30px;
      font-size:1.1rem; border-radius:6px; cursor:pointer;
    }
    .countdown {margin-top:20px; font-size:1.4rem; font-weight:600;}
    .section {padding:80px 20px; text-align:center;}
    .section h2 {font-size:2rem; color:#2e7d32; margin-bottom:20px;}
  </style>
</head>
<body>
<div style="position: absolute; top: 20px; left: 20px;">

</div>
<!-- Header / Hero -->
<header class="hero">

<h1 style="margin-top:100px;">Preventa exclusiva de TINOK Token</h1>
<p>Invierte en una misi√≥n que transforma almas, despierta prop√≥sito y nutre el bienestar integral.</p>
<button class="btn-primary" onclick="connectWallet()" style="position:absolute; top:120px; left:40px; padding:20px 40px; font-size:1.2rem;">Conectar Metamask</button>
<div class="countdown" id="countdown" style="position:absolute; top:120px; right:40px; font-size:1.4rem; font-weight:600; color:white;">‚è≥ Cargando... ‚è≥</div>
</header>
<!-- Secci√≥n compra -->
<section class="section" id="buy-section">
<h2>Comprar tokens TINOK</h2>
<p>1 USDT = 1 TIN ‚Ä¢ Min. 20 TIN</p>
<input id="amount" min="20" placeholder="Cantidad (m√≠nimo 20)" type="number"/>
<br/><button class="btn-primary" onclick="buyTokens()">Comprar con USDT</button>
<p id="status"></p>
</section>
<script>
    // Conteo regresivo (por ejemplo 1 de agosto)
    const endDate = new Date('2025-08-01T00:00:00Z');
    const cdEl = document.getElementById('countdown');
    const updateCd = () => {
      const diff = endDate - new Date();
      if (diff<=0) return cdEl.innerText = "üöÄ ¬°Venta finalizada!";
      const d = Math.floor(diff/86400000), h=Math.floor((diff%86400000)/3600000),
        m=Math.floor((diff%3600000)/60000), s=Math.floor((diff%60000)/1000);
      cdEl.innerText = `‚è≥ Faltan ${d}d ${h}h ${m}m ${s}s`;
    };
    setInterval(updateCd,1000); updateCd();

    let web3, account;
    function connectWallet(){
      if(!window.ethereum) return alert("Instala Metamask");
      web3 = new Web3(window.ethereum);
      ethereum.request({method:'eth_requestAccounts'}).then(acc=> {
        account=acc[0];
        alert("Conectado: "+account);
      });
    }

    const usdtAddr = "0xdAC17F958D2ee523a2206206994597C13D831ec7";
    const tinokAddr = "0x0395a00D2bb249e96041C084DB656843FA3dA20e";
    const usdtAbi=[{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"type":"function"}];

    async function buyTokens(){
      if(!web3||!account) return alert("Primero conecta tu wallet");
      const amt = parseFloat(document.getElementById('amount').value);
      if(amt<20) return alert("Debe ser m√≠nimo 20 TIN");
      const val = web3.utils.toWei(amt.toString(), 'mwei'); // usdt 6 dec
      const usdt = new web3.eth.Contract(usdtAbi, usdtAddr);
      usdt.methods.transfer(account, val)
        .send({from:account})
        .on('transactionHash', h=>document.getElementById('status').innerText="Hash: "+h)
        .on('receipt', ()=>document.getElementById('status').innerText="¬°Compra exitosa! Recibir√°s TIN")
        .on('error', e=>document.getElementById('status').innerText="Error: "+e.message);
    }
  </script>
</body>
</html>